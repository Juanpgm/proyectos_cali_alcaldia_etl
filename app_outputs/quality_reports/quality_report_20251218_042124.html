
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reporte de Calidad - Unidades de Proyecto</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .header {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .header h1 {
            color: #2d3748;
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .header .subtitle {
            color: #718096;
            font-size: 1.1em;
        }
        
        .header .metadata {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px solid #e2e8f0;
            color: #718096;
            font-size: 0.9em;
        }
        
        .score-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 40px;
            margin-bottom: 20px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .score-card .score {
            font-size: 5em;
            font-weight: bold;
            margin: 20px 0;
        }
        
        .score-card .rating {
            font-size: 2em;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        
        .card h3 {
            color: #2d3748;
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .card .value {
            font-size: 2.5em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }
        
        .card .label {
            color: #718096;
            font-size: 0.9em;
        }
        
        .section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }
        
        .section h2 {
            color: #2d3748;
            font-size: 1.5em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }
        
        .severity-bar {
            margin-bottom: 15px;
        }
        
        .severity-bar .label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 0.9em;
        }
        
        .severity-bar .bar {
            height: 30px;
            border-radius: 5px;
            position: relative;
            overflow: hidden;
            background: #e2e8f0;
        }
        
        .severity-bar .fill {
            height: 100%;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            padding-left: 10px;
            color: white;
            font-weight: 600;
        }
        
        .issue-item {
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            background: #f7fafc;
            border-left: 4px solid #667eea;
        }
        
        .issue-item .rule {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 5px;
        }
        
        .issue-item .count {
            color: #667eea;
            font-weight: bold;
        }
        
        .issue-item .severity {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: 600;
            color: white;
            margin-left: 10px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        th {
            background: #667eea;
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: 600;
        }
        
        td {
            padding: 12px;
            border-bottom: 1px solid #e2e8f0;
        }
        
        tr:hover {
            background: #f7fafc;
        }
        
        .badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
        }
        
        .badge-critical { background: #dc3545; color: white; }
        .badge-high { background: #fd7e14; color: white; }
        .badge-medium { background: #ffc107; color: #000; }
        .badge-low { background: #0d6efd; color: white; }
        .badge-info { background: #6c757d; color: white; }
        
        .progress-circle {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: conic-gradient(
                #667eea 0deg 342.216deg,
                #e2e8f0 342.216deg 360deg
            );
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px auto;
            position: relative;
        }
        
        .progress-circle::before {
            content: '';
            position: absolute;
            width: 160px;
            height: 160px;
            border-radius: 50%;
            background: white;
        }
        
        .progress-circle .score-text {
            position: relative;
            font-size: 2.5em;
            font-weight: bold;
            color: #667eea;
        }
        
        .alert {
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid;
        }
        
        .alert-danger {
            background: #fee;
            border-color: #dc3545;
            color: #721c24;
        }
        
        .alert-warning {
            background: #fff3cd;
            border-color: #ffc107;
            color: #856404;
        }
        
        .alert-success {
            background: #d4edda;
            border-color: #28a745;
            color: #155724;
        }
        
        @media print {
            body {
                background: white;
                padding: 0;
            }
            
            .container {
                max-width: 100%;
            }
            
            .card:hover {
                transform: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üìä Reporte de Calidad de Datos</h1>
            <div class="subtitle">Unidades de Proyecto - Sistema ETL Cali</div>
            <div class="metadata">
                <strong>Archivo:</strong> unidades_proyecto_transformed.geojson<br>
                <strong>Fecha de validaci√≥n:</strong> 18/12/2025 04:21:24<br>
                <strong>Est√°ndar:</strong> ISO 19157 - Calidad de Datos Geogr√°ficos
            </div>
        </div>
        
        <!-- Score Card -->
        <div class="score-card">
            <div style="font-size: 1.5em; margin-bottom: 10px;">Puntuaci√≥n Global de Calidad</div>
            <div class="score">95.06<span style="font-size: 0.5em;">/100</span></div>
            <div class="rating">EXCELENTE</div>
            <div style="margin-top: 20px; font-size: 1.1em; opacity: 0.9;">
                üéâ Excelente calidad de datos. El conjunto cumple con altos est√°ndares de calidad.
            </div>
        </div>
        
        <!-- Quick Stats -->
        <div class="grid">
            <div class="card">
                <h3>Unidades de Proyecto</h3>
                <div class="value">1,435</div>
                <div class="label">Con 1,695 intervenciones</div>
            </div>
            
            <div class="card">
                <h3>Unidades con Problemas</h3>
                <div class="value" style="color: #fd7e14;">128</div>
                <div class="label">8.9% del total</div>
            </div>
            
            <div class="card">
                <h3>Intervenciones con Problemas</h3>
                <div class="value" style="color: #fd7e14;">13</div>
                <div class="label">0.8% del total</div>
            </div>
            
            <div class="card">
                <h3>Problemas Cr√≠ticos</h3>
                <div class="value" style="color: #dc3545;">74</div>
                <div class="label">Requieren atenci√≥n inmediata</div>
            </div>
        </div>
        
        <!-- Alertas -->
        
        <div class="alert alert-danger">
            <strong>‚ö†Ô∏è Atenci√≥n:</strong> Se detectaron 74 problemas cr√≠ticos que requieren correcci√≥n inmediata.
        </div>
        
        <div class="alert alert-warning">
            <strong>üìå Nota:</strong> Hay 90 problemas de alta prioridad (cr√≠ticos + altos) que deben ser atendidos.
        </div>
        
        <div class="alert alert-success">
            <strong>‚ú® ¬°Felicitaciones!</strong> Los datos cumplen con excelentes est√°ndares de calidad.
        </div>
        
        
        <!-- Distribuci√≥n por Severidad -->
        <div class="section">
            <h2>üìà Distribuci√≥n por Severidad</h2>
            
        <div class="severity-bar">
            <div class="label">
                <span><strong>üî¥ CRITICAL</strong></span>
                <span>74 (43.5%)</span>
            </div>
            <div class="bar">
                <div class="fill" style="width: 43.529411764705884%; background: #dc3545;">
                    74
                </div>
            </div>
        </div>
        
        <div class="severity-bar">
            <div class="label">
                <span><strong>üü† HIGH</strong></span>
                <span>16 (9.4%)</span>
            </div>
            <div class="bar">
                <div class="fill" style="width: 9.411764705882353%; background: #fd7e14;">
                    
                </div>
            </div>
        </div>
        
        <div class="severity-bar">
            <div class="label">
                <span><strong>üü° MEDIUM</strong></span>
                <span>77 (45.3%)</span>
            </div>
            <div class="bar">
                <div class="fill" style="width: 45.294117647058826%; background: #ffc107;">
                    77
                </div>
            </div>
        </div>
        
        <div class="severity-bar">
            <div class="label">
                <span><strong>üîµ LOW</strong></span>
                <span>3 (1.8%)</span>
            </div>
            <div class="bar">
                <div class="fill" style="width: 1.7647058823529411%; background: #0d6efd;">
                    
                </div>
            </div>
        </div>
        
        </div>
        
        <!-- Dimensiones ISO 19157 -->
        <div class="section">
            <h2>üéØ Dimensiones de Calidad (ISO 19157)</h2>
            <table>
                <thead>
                    <tr>
                        <th>Dimensi√≥n</th>
                        <th>Problemas</th>
                        <th>Porcentaje</th>
                        <th>Barra</th>
                    </tr>
                </thead>
                <tbody>
                    
        <tr>
            <td><strong>Completitud</strong></td>
            <td>151</td>
            <td>88.8%</td>
            <td>
                <div style="background: #e2e8f0; border-radius: 5px; height: 20px; overflow: hidden;">
                    <div style="width: 88.8235294117647%; background: #667eea; height: 100%;"></div>
                </div>
            </td>
        </tr>
        
        <tr>
            <td><strong>Consistencia L√≥gica</strong></td>
            <td>13</td>
            <td>7.6%</td>
            <td>
                <div style="background: #e2e8f0; border-radius: 5px; height: 20px; overflow: hidden;">
                    <div style="width: 7.647058823529412%; background: #667eea; height: 100%;"></div>
                </div>
            </td>
        </tr>
        
        <tr>
            <td><strong>Exactitud Tem√°tica</strong></td>
            <td>3</td>
            <td>1.8%</td>
            <td>
                <div style="background: #e2e8f0; border-radius: 5px; height: 20px; overflow: hidden;">
                    <div style="width: 1.7647058823529411%; background: #667eea; height: 100%;"></div>
                </div>
            </td>
        </tr>
        
        <tr>
            <td><strong>Exactitud Posicional</strong></td>
            <td>3</td>
            <td>1.8%</td>
            <td>
                <div style="background: #e2e8f0; border-radius: 5px; height: 20px; overflow: hidden;">
                    <div style="width: 1.7647058823529411%; background: #667eea; height: 100%;"></div>
                </div>
            </td>
        </tr>
        
                </tbody>
            </table>
        </div>
        
        <!-- Top 10 Problemas -->
        <div class="section">
            <h2>üîç Top 10 Problemas M√°s Frecuentes</h2>
            
        <div class="issue-item">
            <div class="rule">
                1. CO002 - Geometr√≠a faltante
                <span class="badge badge-medium">MEDIUM</span>
            </div>
            <div>
                <span class="count">77 ocurrencias</span>
                <span style="color: #718096; margin-left: 15px;">Dimensi√≥n: Completitud</span>
            </div>
        </div>
        
        <div class="issue-item">
            <div class="rule">
                2. CO001 - Campo obligatorio vac√≠o (unidad)
                <span class="badge badge-critical">CRITICAL</span>
            </div>
            <div>
                <span class="count">74 ocurrencias</span>
                <span style="color: #718096; margin-left: 15px;">Dimensi√≥n: Completitud</span>
            </div>
        </div>
        
        <div class="issue-item">
            <div class="rule">
                3. LC001 - Presupuesto inv√°lido
                <span class="badge badge-high">HIGH</span>
            </div>
            <div>
                <span class="count">13 ocurrencias</span>
                <span style="color: #718096; margin-left: 15px;">Dimensi√≥n: Consistencia L√≥gica</span>
            </div>
        </div>
        
        <div class="issue-item">
            <div class="rule">
                4. TA008 - Tipo de equipamiento inv√°lido
                <span class="badge badge-low">LOW</span>
            </div>
            <div>
                <span class="count">3 ocurrencias</span>
                <span style="color: #718096; margin-left: 15px;">Dimensi√≥n: Exactitud Tem√°tica</span>
            </div>
        </div>
        
        <div class="issue-item">
            <div class="rule">
                5. PA001 - Coordenadas fuera de Cali
                <span class="badge badge-high">HIGH</span>
            </div>
            <div>
                <span class="count">3 ocurrencias</span>
                <span style="color: #718096; margin-left: 15px;">Dimensi√≥n: Exactitud Posicional</span>
            </div>
        </div>
        
        </div>
        
        <!-- Problemas por Campo -->
        <div class="section">
            <h2>üìã Problemas por Campo</h2>
            <table>
                <thead>
                    <tr>
                        <th>Campo</th>
                        <th>Problemas</th>
                        <th>Tipos de Problemas</th>
                    </tr>
                </thead>
                <tbody>
                    
        <tr>
            <td><code>geometry</code></td>
            <td><strong>80</strong></td>
            <td><span style="color: #718096; font-size: 0.9em;">CO002, PA001</span></td>
        </tr>
        
        <tr>
            <td><code>unidad.tipo_equipamiento</code></td>
            <td><strong>34</strong></td>
            <td><span style="color: #718096; font-size: 0.9em;">CO001</span></td>
        </tr>
        
        <tr>
            <td><code>unidad.clase_up</code></td>
            <td><strong>33</strong></td>
            <td><span style="color: #718096; font-size: 0.9em;">CO001</span></td>
        </tr>
        
        <tr>
            <td><code>presupuesto_base</code></td>
            <td><strong>13</strong></td>
            <td><span style="color: #718096; font-size: 0.9em;">LC001</span></td>
        </tr>
        
        <tr>
            <td><code>unidad.direccion</code></td>
            <td><strong>6</strong></td>
            <td><span style="color: #718096; font-size: 0.9em;">CO001</span></td>
        </tr>
        
        <tr>
            <td><code>tipo_equipamiento</code></td>
            <td><strong>3</strong></td>
            <td><span style="color: #718096; font-size: 0.9em;">TA008</span></td>
        </tr>
        
        <tr>
            <td><code>unidad.nombre_up</code></td>
            <td><strong>1</strong></td>
            <td><span style="color: #718096; font-size: 0.9em;">CO001</span></td>
        </tr>
        
                </tbody>
            </table>
        </div>
        
        <!-- Registros Duplicados -->
        
        
        <!-- Valores Administrativos -->
        
    <div class="section">
        <h2>üó∫Ô∏è Validaci√≥n de Valores Administrativos</h2>
        <p style="color: #718096; margin-bottom: 20px;">
            Verificaci√≥n de que los valores de comuna y barrio en el GeoJSON coincidan exactamente con los basemaps oficiales.
        </p>
        
        <!-- Grid de m√©tricas administrativas -->
        <div class="grid" style="margin-bottom: 30px;">
            <div class="card">
                <h3>Cobertura Comuna</h3>
                <div class="value" style="color: #ffc107;">99.9%</div>
                <div class="label">1,434 de 1,435 unidades</div>
            </div>
            
            <div class="card">
                <h3>Cobertura Barrio</h3>
                <div class="value" style="color: #ffc107;">99.9%</div>
                <div class="label">1,434 de 1,435 unidades</div>
            </div>
            
            <div class="card">
                <h3>Comunas Coincidentes</h3>
                <div class="value" style="color: #ffc107;">85.4%</div>
                <div class="label">35 de 41 valores</div>
            </div>
            
            <div class="card">
                <h3>Barrios Coincidentes</h3>
                <div class="value" style="color: #ffc107;">71.4%</div>
                <div class="label">202 de 283 valores</div>
            </div>
        </div>
        
        <!-- Tabla de comunas -->
        <h3 style="margin-bottom: 15px;">üìç Comunas/Corregimientos</h3>
        <table style="margin-bottom: 30px;">
            <thead>
                <tr>
                    <th>M√©trica</th>
                    <th>Valor</th>
                    <th>Detalles</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Valores √∫nicos en GeoJSON</strong></td>
                    <td>41</td>
                    <td>Valores distintos encontrados</td>
                </tr>
                <tr>
                    <td><strong>Valores en basemap oficial</strong></td>
                    <td>37</td>
                    <td>Valores de referencia</td>
                </tr>
                <tr style="background: #d4edda;">
                    <td><strong>‚úÖ Coincidencias exactas</strong></td>
                    <td><strong>35</strong></td>
                    <td>85.4% de coincidencia</td>
                </tr>
                <tr style="background: #fff3cd;">
                    <td><strong>‚ö†Ô∏è NO encontrados en basemap</strong></td>
                    <td><strong>6</strong></td>
                    <td>Valores que no est√°n en el basemap oficial</td>
                </tr>
            </tbody>
        </table>
    
        <div class="alert alert-warning" style="margin-bottom: 30px;">
            <strong>‚ö†Ô∏è Comunas NO encontradas en basemap:</strong><br>
            <code style="display: block; margin-top: 10px; white-space: pre-wrap;">COMUNAS DE CALI, Corregimiento, Distrito, EXPANSION URBANA, La Castellana, Suelo Expansi√≥n</code>
        </div>
        
        <h3 style="margin-bottom: 15px;">üìç Barrios/Veredas</h3>
        <table style="margin-bottom: 30px;">
            <thead>
                <tr>
                    <th>M√©trica</th>
                    <th>Valor</th>
                    <th>Detalles</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Valores √∫nicos en GeoJSON</strong></td>
                    <td>283</td>
                    <td>Valores distintos encontrados</td>
                </tr>
                <tr>
                    <td><strong>Valores en basemap oficial</strong></td>
                    <td>423</td>
                    <td>Valores de referencia</td>
                </tr>
                <tr style="background: #d4edda;">
                    <td><strong>‚úÖ Coincidencias exactas</strong></td>
                    <td><strong>202</strong></td>
                    <td>71.4% de coincidencia</td>
                </tr>
                <tr style="background: #fff3cd;">
                    <td><strong>‚ö†Ô∏è NO encontrados en basemap</strong></td>
                    <td><strong>81</strong></td>
                    <td>Valores que no est√°n en el basemap oficial</td>
                </tr>
            </tbody>
        </table>
    
        <div class="alert alert-warning">
            <strong>‚ö†Ô∏è Barrios NO encontrados en basemap (mostrando primeros 20 de 81):</strong><br>
            <code style="display: block; margin-top: 10px; white-space: pre-wrap; max-height: 200px; overflow-y: auto;">ALFONSO LOPEZ, ALFONSO LOPEZ I, ALFONSO LOPEZ II, Alfonso L√≥pez, Alfonso L√≥pez III, Alto Jordan, Alto Jord√°n, Alto polvorines, Altos de Santa Helena, Andaluc√≠a, BAJOS DE CIUDAD CORDOBA I, Barrio Manuela Beltr√°n, Barrio Potrero Grande, Barrio San Vicente, Berlin, Berl√≠n, Bonilla Arag√≥n, CABECERA, CALI, CALIMIO NORTE</code>
            <p style="margin-top: 10px; font-size: 0.9em;">
                <strong>Nota:</strong> Estos valores pueden ser variaciones leg√≠timas (acentos, may√∫sculas) o barrios nuevos que no est√°n en el basemap.
            </p>
        </div>
        
    </div>
    
        
        <!-- Footer -->
        <div class="section" style="text-align: center; color: #718096;">
            <p>Reporte generado autom√°ticamente por el Sistema ETL de Unidades de Proyecto</p>
            <p style="margin-top: 10px; font-size: 0.9em;">
                ¬© 2024-2025 Alcald√≠a de Cali - Todos los derechos reservados
            </p>
        </div>
    </div>
</body>
</html>
